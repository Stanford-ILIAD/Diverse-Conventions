<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Overcooked Demo</title>
    <link rel="Favicon" href="static/favicon.ico" />

    <script src="static/lib/jquery-min.js" type="text/javascript"> </script>
    <script src="static/lib/d3.v3.min.js" type="text/javascript"> </script>
    <script src="static/lib/babel.min.js" type="text/javascript"> </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script src="static/js/demo/demo.js" type="text/javascript"> </script>

    <link rel="stylesheet" href="static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/css/style.css" type="text/css" />
  </head>
  <body>
    <div class='container' style="padding-top: 100px;">
        <h3>Instructions</h3>
        <p>
            In this task you will be playing a web-based game of Overcooked with 4 different AI agents (and a single-player version to get familiarized with the task). You will play with <b>each agent TWICE for each environment</b>. <br>
            The five agents will be shown in the "Algo" dropdown menu. Simply select one of them and press enter, and a game will begin. <br>
            Each game will last 40 seconds. Your goal is to score as many points as you can.<br>
            <br>
            You will use Arrow keys to move your agent (the blue chef), and Space bar to interact with objects.<br>
            To score points, you and the AI agent will need to place 3 onions in the stove, wait for the red ticker to tick to 20, and then put<br>
            the cooked onions on a plate and serve it to the grey square.<br>
            It's much easier to understand the game by watching <a href='https://drive.google.com/file/d/1hfcgIWDA6lWFw3cNTyiW3vKDksj9u_qd/view' target="_blank">this video</a>. (If the video doesn't play, you may have to allow third-party cookies.)<br>
            You will score 20 points after you successfully serve a dish. Try to serve as many dishes as you can!<br>
            <br>
            After each game ends you will see a reminder of how many games you still need to play with each agent.<br>
            <b>Please play with the agents in the order of the dropdown menu!</b><br>

	      <p>After completing 2 games with an agent on a specific layout, <b> please fill out <a href="https://forms.gle/9jXt8zacHVsjjwsu7" target="_blank" rel="noopener noreferrer">this Google form</a> </b> and sign in with your Stanford email. In total, there are 8 sections in the form since there are 2 layouts and 4 AI agents (algo0 to algo3). Note that you should still play 2 games on each layout with the "No AI" algo selected to familiarize yourself with the environment, but we will not be asking for responses on those sections in the form.</p>
            <!-- After you have played TWO games with each agent, the Prolific completion code will be shown to you.<br> -->
            <br>
            Unfortunately there will be lag due to network latency. That is to be expected.<br>
            <!-- <b>If you repeatedly score 0 points your submission may be rejected. If you score 40 points often enough you may receive a bonus payment.</b> --><br>
            Good luck and have fun!<br>
            
        </p>
        
        <h3>Check your understanding</h3>
        <ol>
        <li>I have read the instructions and watched the intro video.<br />
          <input type="radio" name="q0" id="q0_option1" value="q0_option1" onclick="checkAnswers()" />
          <label for="q0_option1">Yes.</label><br>
          <input type="radio" name="q0" id="q0_option2" value="q0_option2" onclick="checkAnswers()" />
          <label for="q0_option2">No.</label><br>
        </li>
	<li>I have the Google form open in another tab or window, and I will fill out the corresponding section after playing 2 games in a particular configuration<br />
          <input type="radio" name="g0" id="g0_option1" value="g0_option1" onclick="checkAnswers()" />
          <label for="g0_option1">Yes.</label><br>
          <input type="radio" name="g0" id="g0_option2" value="g0_option2" onclick="checkAnswers()" />
          <label for="g0_option2">No.</label><br>
        </li>
        <li>Which of the following is true?<br />
          <input type="radio" name="q1" id="q1_option1" value="q1_option1" onclick="checkAnswers()" />
          <label for="q1_option1">Arrow keys to move my agent, Space bar to interact with objects.</label><br>
          <input type="radio" name="q1" id="q1_option2" value="q1_option2" onclick="checkAnswers()" />
          <label for="q1_option2">Mouse to move my agent, Enter to interact with objects.</label><br>
        </li>
        <li>Which of the following is true?<br />
          <input type="radio" name="q2" id="q2_option1" value="q2_option1" onclick="checkAnswers()" />
          <label for="q2_option1">I have to play with each algo once. I have to use the dropdown menu to select the agent I am playing with.</label><br>
          <input type="radio" name="q2" id="q2_option2" value="q2_option2" onclick="checkAnswers()" />
          <label for="q2_option2">I have to play with each algo twice. I have to use the dropdown menu to select the agent I am playing with.</label><br>
          <input type="radio" name="q2" id="q2_option3" value="q2_option3" onclick="checkAnswers()" />
          <label for="q2_option3">I have to play with each algo three times. I have to use the dropdown menu to select the agent I am playing with.</label><br>
        </li>
        </ol>
        <br />
        <center><form action="javascript:reveal()" method="GET">
            Correctly answer the questions above to activate the start button.<br />Please enter your SUNET ID (first part of your stanford email).<br />
            <input type="hidden" name="env" value="fetch" />
            <input type="hidden" name="agent" value="combined" />
            SUNET ID: <input type="text" name="prolificID" id="prolificID" disabled /><br>
            <input type="submit" value="Start" id="startButton" disabled />
        </form></center>
    </div>

    <script>
      window.onload = checkAnswers();
    function checkAnswers() {
        if (document.getElementById('q0_option1').checked && document.getElementById('g0_option1').checked && document.getElementById('q1_option1').checked && document.getElementById('q2_option2').checked) {
            document.getElementById('prolificID').disabled = false;
            document.getElementById('startButton').disabled = false;
        }
        else {
            document.getElementById('prolificID').value = "";
            document.getElementById('prolificID').disabled = true;
            document.getElementById('startButton').disabled = true;
        }
    }
    function reveal() {
        if (document.getElementById('prolificID').value != "") {
            document.getElementById('q0_option1').disabled = true;
            document.getElementById('q0_option2').disabled = true;
            document.getElementById('g0_option1').disabled = true;
            document.getElementById('g0_option2').disabled = true;
            document.getElementById('q1_option1').disabled = true;
            document.getElementById('q1_option2').disabled = true;
            document.getElementById('q2_option1').disabled = true;
            document.getElementById('q2_option2').disabled = true;
            document.getElementById('q2_option3').disabled = true;

            document.getElementById('prolificID').disabled = true;
            document.getElementById('startButton').disabled = true;
            document.getElementById('maindiv').style.display = 'initial';
            
            
            var algoform = document.getElementById('algo');
            for (var i = algoform.children.length; i >= 1; i--) {
                algoform.appendChild(algoform.children[Math.random() * i | 1]);
            }
            algoform.selectedIndex = 0;
        }
    }
    </script>


    <div id='maindiv' style="display: none;">
      <form>
	<div class="container">
	  <div class="row text-center">
	    <div class="form-group col-lg-3">
	      <label for="playerZero" style="color:#1E6A9E">Player 1</label>
	      <select class="form-control" id="playerZero" disabled>
		<option value="human">Human Keyboard Input</option>
		<option value="ai">AI agent</option>
	      </select>
	    </div>
	    <div class="form-group col-lg-3">
	      <label for="playerOne" style="color:#44956B">Player 2</label>
	      <select class="form-control" id="playerOne" disabled>
		<option value="ai">AI agent</option>
		<option value="human">Human Keyboard Input</option>
	      </select>
	    </div>
	    <div class="form-group col-lg-2">
	      <label for="layout">Layout</label>
	      <select class="form-control" id="layout">
		<option value="cramped_room">Cramped Room (simple)</option>
		<!-- <option value="asymmetric_advantages">Asymmetric Advantages (unident_s)</option> -->
		<option value="coordination_ring">Coordination Ring (random1)</option>
		<!-- <option value="forced_coordination">Forced Coordination (random0)</option> -->
		<!-- <option value="counter_circuit">Counter Circuit (random3)</option> -->
	      </select>
	    </div>
	    <div class="form-group col-lg-2">
	      <label for="gameTime">Game Length (sec)</label>
	      <input type="number" id="gameTime" value="40" min="1" max="1800" disabled>
	    </div>
	    <div class="form-group col-lg-2">
	      <label for="algo">Algo</label>
	      <select class="form-control" id="algo">
		<option value="BLANK">No AI</option>
		<option value="SP">algo0<!-- (SP) --></option>
		<option value="MP">algo1<!-- (MP) --></option>
		<option value="ADAP">algo2<!-- (ADAP) --></option>
		<option value="XP">algo3<!-- (XP) --></option>
	      </select>
	    </div>
	    <!-- <div class="form-group col-lg-2">
		 <label for="layout">Deterministic?</label>
		 <input type="checkbox" id="deterministic" name="deterministic">
	    </div> -->
	    <!-- <div class="form-group col-lg-2">
		 <label for="layout">Automatically Save Game Trajectories?</label>
		 <input type="checkbox" id="saveTrajectories" name="saveTrajectories">
	    </div> -->
  
	  </div>
	</div>
      </form>
      <!-- <h4 class="text-center"><a href="./instructions">Instructions</a></h4><h4 class="text-center"><a href="./replay">Replay Trajectories</a></h4>  -->
      <div id="overcooked" class="text-center"></div>
      <div id="control" class="text-center"></div>
      <div id="record" class="text-center"></div>
    </div>
    <div style="padding: 100px;"></div>

    <noscript>
      <h1>Warning: Javascript seems to be disabled</h1>
      <p>This website requires that Javascript be enabled on your browser.</p>
      <p>Instructions for enabling Javascript in your browser can be found 
	<a href="http://support.google.com/bin/answer.py?hl=en&answer=23852">here</a></p>
    </noscript>
  </body>
</html>
